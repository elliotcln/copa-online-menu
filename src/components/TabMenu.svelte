<script>
    import TabMenuPlates from './TabMenuPlates.svelte'
    import menus from '../json/menu.json';
    let selectedTab = 0;
</script>

<!-- Mobile version -->
<section aria-label="Notre carte" class="lg:hidden pb-20">
    <div class="divide-y divide-primary">
        {#each menus as m, index}
            <button 
            on:click={() => selectedTab = index}
            aria-controls="accordion-panel-{index}"
            aria-expanded={selectedTab === index ? 'true' : 'false'}
            id="accordion-button-{index}"
            class="w-full flex justify-between p-4 font-title text-xl">
                <span>{m.title}</span>
                {#if selectedTab != index}
                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m6-6H6" />
                </svg>                      
                {:else}
                <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M18 12H6" />
                </svg>                      
                {/if}
            </button>
            <div 
            role="region"
            aria-labelledby="accordion-button-{index}"
            class:hidden={index != selectedTab}
            class="bg-primary bg-opacity-20"
            >
                <ul class="p-4">
                    {#each m.plates as plate }
                    <TabMenuPlates plate={plate} />
                    {/each}
                </ul>

                {#if m.infos}
                <div class="px-4 pb-4">
                    <div class="text-xs tracking-wide p-2 uppercase rounded-full font-semibold text-center">{m.infos}</div>
                </div>
                {/if}
            </div>
        {/each}
    </div>
</section>

<svg class="hidden">
	<defs>
		<g id="img-gf">
			<g xmlns="http://www.w3.org/2000/svg" clip-path="url(#clip0_15_19)"><path fill="#E9AE3D" fill-rule="evenodd" d="M5.19531 2.79297C5.14223 2.65599 5.05758 2.55182 4.94141 2.48047C4.75988 2.75156 4.6557 3.05104 4.62891 3.37891C4.63105 3.68261 4.74824 3.93 4.98047 4.12109C5.04488 4.07625 5.10348 4.02418 5.15625 3.96484C5.37633 3.58334 5.38934 3.19272 5.19531 2.79297ZM4.57031 4.70703C4.31184 4.30074 3.94074 4.06637 3.45703 4.00391C3.48418 4.17754 3.52975 4.3468 3.59375 4.51172C3.79192 4.98977 4.15 5.22414 4.66797 5.21484C4.66656 5.03988 4.63402 4.87063 4.57031 4.70703ZM5.76172 5.15625C6.22316 4.90293 6.45754 4.51883 6.46484 4.00391C6.23773 4.06027 6.01641 4.14492 5.80078 4.25781C5.4523 4.47937 5.28305 4.7984 5.29297 5.21484C5.45242 5.22094 5.60867 5.20141 5.76172 5.15625ZM4.45312 6.07422C4.1666 5.81703 3.83457 5.64773 3.45703 5.56641C3.5207 6.32008 3.92434 6.73676 4.66797 6.81641C4.67508 6.54516 4.60344 6.29773 4.45312 6.07422ZM5.29297 6.81641C6.05281 6.73398 6.44344 6.3173 6.46484 5.56641C6.22375 5.63625 5.98938 5.73391 5.76172 5.85938C5.42387 6.08586 5.26762 6.40488 5.29297 6.81641ZM5.17578 1.67969C5.08828 1.64152 4.99715 1.62199 4.90234 1.62109C4.32363 2.10137 4.01113 2.72637 3.96484 3.49609C3.69737 3.41508 3.42393 3.363 3.14453 3.33984C3.02679 3.33041 2.92913 3.36947 2.85156 3.45703C2.76601 3.94656 2.83763 4.41531 3.06641 4.86328C2.99921 4.91875 2.9276 4.97082 2.85156 5.01953C2.77387 5.3884 2.79991 5.75301 2.92969 6.11328C3.18522 6.95391 3.75163 7.39664 4.62891 7.44141C4.66137 7.68777 4.6809 7.9352 4.6875 8.18359C4.88281 8.44402 5.07812 8.44402 5.27344 8.18359C5.28004 7.9352 5.29957 7.68777 5.33203 7.44141C5.85367 7.43055 6.28984 7.23523 6.64062 6.85547C6.97508 6.40562 7.15086 5.89781 7.16797 5.33203C7.19605 5.10121 7.10488 4.94496 6.89453 4.86328C7.05906 4.51766 7.1502 4.15305 7.16797 3.76953C7.20141 3.58256 7.13629 3.44584 6.97266 3.35938C6.63984 3.34832 6.31434 3.39389 5.99609 3.49609C5.94996 2.78553 5.67652 2.18006 5.17578 1.67969Z" clip-rule="evenodd" opacity=".938"/><path fill="#E9AE3D" fill-rule="evenodd" d="M5.44922 -0.0195312H4.51172C1.99136 0.39143 0.480949 1.84976 -0.0195312 4.35547V5.52734C0.389225 8.11059 1.88662 9.59496 4.47266 9.98047H5.48828C8.09238 9.58992 9.58977 8.09254 9.98047 5.48828V4.35547C9.48 1.84976 7.96957 0.39143 5.44922 -0.0195312ZM7.83203 1.67969C6.99191 0.960551 6.01535 0.589457 4.90234 0.566406C3.5992 0.654809 2.51196 1.18866 1.64062 2.16797C0.215201 4.04367 0.208691 5.92516 1.62109 7.8125C1.64714 7.83855 1.67318 7.83855 1.69922 7.8125C1.94782 7.55082 2.20823 7.30344 2.48047 7.07031C2.85191 7.01191 2.98863 7.16168 2.89062 7.51953L2.14844 8.26172C2.14209 8.33543 2.17464 8.39402 2.24609 8.4375C3.67804 9.4791 5.21449 9.66141 6.85547 8.98438C8.18852 8.28891 9.00234 7.20164 9.29688 5.72266C9.52773 4.35855 9.18918 3.16064 8.28125 2.12891L7.48047 2.92969C7.05449 2.96702 6.93082 2.79124 7.10938 2.40234L7.83203 1.67969Z" clip-rule="evenodd" opacity=".926"/></g><defs xmlns="http://www.w3.org/2000/svg"><clipPath id="clip0_15_19"><path fill="white" d="M0 0H10V10H0z"/></clipPath></defs>
		</g>
		<g id="img-vegan">
			<g xmlns="http://www.w3.org/2000/svg" clip-path="url(#clip0_15_16)"><path fill="#6D9455" fill-rule="evenodd" d="M9.98047 3.88672C9.98047 4.25129 9.98047 4.6159 9.98047 4.98047C9.74516 6.91484 8.65141 7.95 6.69922 8.08594C5.83727 8.12895 4.97789 8.10289 4.12109 8.00781C1.90108 7.68879 0.566445 6.43227 0.117188 4.23828C0.0622328 3.96063 0.0166598 3.6872 -0.0195312 3.41797C-0.0195312 2.97526 -0.0195312 2.53255 -0.0195312 2.08984C0.0253853 1.98649 0.10351 1.91488 0.214844 1.875C1.56384 1.75679 2.83987 2.00418 4.04297 2.61719C5.07578 3.27404 5.73332 4.20504 6.01562 5.41016C6.32969 4.74449 6.83102 4.28227 7.51953 4.02344C8.22512 3.75496 8.95426 3.65079 9.70703 3.71094C9.82527 3.73223 9.91641 3.79082 9.98047 3.88672ZM0.605469 2.48047C1.62848 2.46501 2.60504 2.66683 3.53516 3.08594C4.32434 3.52386 4.8777 4.1684 5.19531 5.01953C5.42223 5.65195 5.53941 6.30297 5.54688 6.97266C4.79816 6.22395 4.04949 5.47527 3.30078 4.72656C3.01435 4.5902 2.83206 4.67484 2.75391 4.98047C2.78264 5.0602 2.8152 5.13832 2.85156 5.21484C3.58724 5.95051 4.32293 6.68621 5.05859 7.42188C3.95332 7.43102 2.95073 7.11852 2.05078 6.48438C1.28632 5.75625 0.837102 4.86434 0.703125 3.80859C0.641164 3.36793 0.608613 2.92522 0.605469 2.48047ZM6.77734 7.40234C7.19262 6.9675 7.61582 6.53781 8.04688 6.11328C8.1657 5.87254 8.10711 5.69676 7.87109 5.58594C7.75707 5.56438 7.65289 5.59043 7.55859 5.66406C7.13543 6.08723 6.71223 6.51043 6.28906 6.93359C6.36648 5.49656 7.1152 4.65672 8.53516 4.41406C8.80676 4.36863 9.0802 4.3491 9.35547 4.35547C9.36613 5.17598 9.13828 5.91816 8.67188 6.58203C8.14621 7.09383 7.51469 7.36727 6.77734 7.40234Z" clip-rule="evenodd" opacity=".934"/></g><defs xmlns="http://www.w3.org/2000/svg"><clipPath id="clip0_15_16"><path fill="white" d="M0 0H10V10H0z"/></clipPath></defs>
		</g>
		<g id="img-vege">
			<g xmlns="http://www.w3.org/2000/svg" clip-path="url(#clip0_15_13)"><path fill="#739C59" fill-rule="evenodd" d="M0.449219 -0.0195312C0.553387 -0.0195312 0.657551 -0.0195312 0.761719 -0.0195312C1.52718 0.465957 2.15869 1.09096 2.65625 1.85547C3.75653 3.61422 4.51172 5.51527 4.92188 7.55859C5.1175 6.64566 5.39746 5.76023 5.76172 4.90234C5.28883 4.20914 5.1391 3.45393 5.3125 2.63672C5.47332 2.15056 5.76629 1.76645 6.19141 1.48438C6.87785 1.19325 7.55492 0.880754 8.22266 0.546875C8.50645 0.385917 8.76687 0.197115 9.00391 -0.0195312C9.10809 -0.0195312 9.21223 -0.0195312 9.31641 -0.0195312C9.41289 0.0422527 9.47148 0.133399 9.49219 0.253906C9.65566 1.0272 9.70777 1.80845 9.64844 2.59766C9.5057 3.60005 8.99141 4.34875 8.10547 4.84375C7.55039 5.08707 6.97098 5.19773 6.36719 5.17578C5.77195 6.6284 5.42039 8.13879 5.3125 9.70703C5.2918 9.82754 5.2332 9.91867 5.13672 9.98047C5.03254 9.98047 4.9284 9.98047 4.82422 9.98047C4.7734 9.93594 4.72781 9.88387 4.6875 9.82422C4.39895 7.88859 3.89112 6.01359 3.16406 4.19922C2.65606 2.95455 1.92038 1.86731 0.957031 0.9375C0.754149 0.780191 0.545813 0.630449 0.332031 0.488281C0.254309 0.284801 0.293372 0.11553 0.449219 -0.0195312ZM8.84766 0.917969C8.88656 0.914617 8.9191 0.927641 8.94531 0.957031C9.00387 1.47654 9.01687 1.99737 8.98438 2.51953C8.79691 3.55344 8.19145 4.19797 7.16797 4.45312C7.01172 4.47918 6.85547 4.47918 6.69922 4.45312C7.01184 3.91918 7.36988 3.41789 7.77344 2.94922C7.84504 2.57812 7.69531 2.42839 7.32422 2.5C6.83738 2.97142 6.44027 3.51179 6.13281 4.12109C5.91488 3.68708 5.86281 3.23135 5.97656 2.75391C6.09402 2.46715 6.28281 2.23929 6.54297 2.07031C7.03449 1.84138 7.5293 1.62002 8.02734 1.40625C8.31617 1.26214 8.58961 1.09938 8.84766 0.917969Z" clip-rule="evenodd" opacity=".934"/></g><defs xmlns="http://www.w3.org/2000/svg"><clipPath id="clip0_15_13"><path fill="white" d="M0 0H10V10H0z"/></clipPath></defs>
		</g>
	</defs>
</svg>


<style lang="scss" scoped>

button[aria-expanded='true'] {
    @apply bg-primary text-rich-black;
}
</style>